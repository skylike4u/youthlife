{% extends 'base.html' %} {% block content %}
<style>
  body {
    background-color: #f8f9fa; /* Light grey background for a soft look */
  }

  .card-img-overlay {
    background: rgba(0, 0, 0, 0.5); /* Dark overlay for text readability */
  }

  .card-title {
    font-size: 2rem; /* Larger titles for impact */
  }

  .card-text {
    font-size: 1.2rem; /* Larger text for readability */
  }

  .btn-container {
    display: flex;
    justify-content: center; /* Center horizontally */
    margin-top: 20px; /* Optional: add space above the button */
    }
.btn-container .btn-all-more button {
    border: 2px solid #ff9933;
    padding: 10px 20px;
    margin: 2rem 0;
    background-color: white;
    color: #000000;
    cursor: pointer;
    font-size: 16px;
    }
.btn-container .btn-more button {
    border: 2px solid #007bff;
    padding: 10px 20px;
    margin: 2rem 0;
    background-color: white;
    color: #000000;
    cursor: pointer;
    font-size: 16px;
    }


  .pagination .page-link {
    color: #fff; /* White text */
    background-color: #007bff; /* Bootstrap primary color */
    border-color: #007bff;
  }

  .pagination .page-item.active .page-link {
    background-color: #0056b3;
    border-color: #0056b3;
  }
</style>

<div class="inner" style="margin-top: 70px">
  <div class="container mt-5">
    <h3 style="font-size: 44px">
      <span style="color: red">_</span>{{ category_name }}
    </h3>

    {% if posts %}
    <div class="list-group">
      {% for post in posts %}
      <div class="list-group-item mb-4 pb-4 shadow-sm border-bottom">
        <div class="row align-items-center">
          <!-- 이미지 배치 (좌측) -->
          <div class="col-md-5">
            <a href="{% url 'blogs:detail' pk=post.pk %}">
              <img
                src="{{ post.featured_image.url }}"
                alt="{{ post.title }}"
                class="img-fluid"
                style="width: 28rem; height: 28rem; object-fit: cover"
              />
            </a>
          </div>

          <!-- 텍스트 정보 배치 (우측) -->
          <div class="col-md-7">
            <h3 class="mt-0 font-weight-bold mb-2">
              <a
                href="{% url 'blogs:detail' pk=post.pk %}"
                class="text-decoration-none text-dark"
              >
                {{ post.title|truncatechars:50 }}
              </a>
            </h3>
            <p class="font-italic text-muted mb-0 small">
              {{ post.excerpt|truncatechars:150 }}
            </p>
            <br />
            <br />
            <p class="text-muted mb-2 small">
              By {{ post.author|upper }} / {{ post.published_at|date:"M d, Y" }}
            </p>
            <div class="d-flex align-items-center justify-content-between mt-3">
              <a
                href="{% url 'blogs:detail' pk=post.pk %}"
                class="btn btn-primary btn-sm"
                >Read More</a
              >
              <span class="text-muted small">
                <i class="fas fa-eye"></i> {{ post.views }} 조회수
              </span>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- 전체/카테고리별 목록이동 버튼 만들기(div) -->
    <div class="btn-container">
      <!-- 전체 목록리스트 버튼 만들기 -->
      <a
        href="{% url 'blogs:list' %}"
        class="btn-all-more"
        style="float: center"
      >
        <button style="border-radius: 7px; margin: 0.5rem">
          <b>전체 목록</b>
        </button>
      </a>

      <!-- 카테고리별 목록 추가(현재 detail.html이 속해있는 카테고리 목록을 나타내도록 조건부 노출) -->
      <a
        href="{% url 'blogs:category_post_list' category_name='건강' %}"
        class="btn-more"
        style="float: center"
      >
        <button style="border-radius: 7px; margin: 0.5rem">
          <b>건강 목록</b>
        </button>
      </a>
      <a
        href="{% url 'blogs:category_post_list' category_name='여행' %}"
        class="btn-more"
        style="float: center"
      >
        <button style="border-radius: 7px; margin: 0.5rem">
          <b>여행 목록</b>
        </button>
      </a>
      <a
        href="{% url 'blogs:category_post_list' category_name='음식' %}"
        class="btn-more"
        style="float: center"
      >
        <button style="border-radius: 7px; margin: 0.5rem">
          <b>음식 목록</b>
        </button>
      </a>
      <a
        href="{% url 'blogs:category_post_list' category_name='패션-뷰티' %}"
        class="btn-more"
        style="float: center"
      >
        <button style="border-radius: 7px; margin: 0.5rem">
          <b>패션/뷰티 목록</b>
        </button>
      </a>
      <a
        href="{% url 'blogs:category_post_list' category_name='그외다양한주제' %}"
        class="btn-more"
        style="float: center"
      >
        <button style="border-radius: 7px; margin: 0.5rem">
          <b>그외다양한주제 목록</b>
        </button>
      </a>
    </div>

    <!-- 페이지네이션 -->
    <div class="pagination justify-content-center mt-4">
      <ul class="pagination">
        {% if posts.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page=1">&laquo; 처음</a>
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ posts.previous_page_number }}"
            >이전</a
          >
        </li>
        {% else %}
        <li class="page-item disabled">
          <span class="page-link">&laquo; 처음</span>
        </li>
        <li class="page-item disabled">
          <span class="page-link">이전</span>
        </li>
        {% endif %}

        <!-- 현재 페이지와 전체 페이지 수 출력 -->
        <li class="page-item disabled">
          <span class="page-link"
            >Page {{ posts.number }} of {{ posts.paginator.num_pages }}</span
          >
        </li>

        {% if posts.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ posts.next_page_number }}"
            >다음</a
          >
        </li>
        <li class="page-item">
          <a class="page-link" href="?page={{ posts.paginator.num_pages }}"
            >끝 &raquo;</a
          >
        </li>
        {% else %}
        <li class="page-item disabled">
          <span class="page-link">다음</span>
        </li>
        <li class="page-item disabled">
          <span class="page-link">끝 &raquo;</span>
        </li>
        {% endif %}
      </ul>
    </div>
    {% else %}
    <div class="no-post">
        <div>
            <h2>
                <p class="text-center">게시물이 없습니다.</p>
            </h2>
        </div>
        <div>
            <!-- with 구문을 이용해서 안에 있었던 posts를 현재 있는 posts과 동기화 시켜준다 -->
            <!-- 이렇게 되면 템플릿 blogs에 category_list.html 안에서 posts 변수를 사용할 수 있게 된다.  -->
            {% include 'partials/category_nav_box.html' with posts=posts %}
        </div>
        
    </div>
    
    {% endif %}
  </div>
</div>

{% endblock %}
